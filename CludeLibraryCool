local Clude = {}

function Clude:CreateWindow(Option)
    local size = UDim2.new(0.2000004, 289, 0.2000004, 235)
    local gui = Instance.new("ScreenGui")
    gui.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")
    gui.ResetOnSpawn = true

    local frame = Instance.new("Frame")
    frame.Parent = gui
    frame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
    frame.Size = size
    frame.Position = UDim2.new(0.23, 0, 0.01, 0)
    frame.Active = true
    frame.Draggable = true
    Instance.new("UICorner", frame).CornerRadius = UDim.new(0, 7)

    local ftl = Instance.new("Frame")
    ftl.Parent = frame
    ftl.BackgroundTransparency = 1
    ftl.Size = UDim2.new(0.987, 0, 0.08, 0)
    ftl.Position = UDim2.new(0, 3, 0, 3)

    local title = Instance.new("TextLabel")
    title.Parent = ftl
    title.BackgroundTransparency = 1
    title.Text = Option.Title or "Cludes Window"
    title.Font = Enum.Font.SourceSansBold
    title.TextXAlignment = Enum.TextXAlignment.Left
    title.Position = UDim2.new(0, 1, 0, 6)
    title.TextColor3 = Color3.fromRGB(255, 255, 255)
    title.TextSize = 20
    title.Size = ftl.Size

    -- Tab Scroll Section
    local tabScroll = Instance.new("ScrollingFrame")
    tabScroll.Parent = frame
    tabScroll.Size = UDim2.new(0, 87, 0.82, 0)
    tabScroll.Position = UDim2.new(0, 3, 0.07, 0)
    tabScroll.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
    tabScroll.BorderSizePixel = 0
    tabScroll.ScrollBarThickness = 3
    tabScroll.CanvasSize = UDim2.new(0, 0, 0, 0)
    tabScroll.AutomaticCanvasSize = Enum.AutomaticSize.Y
    Instance.new("UICorner", tabScroll).CornerRadius = UDim.new(0, 7)

    local uilist = Instance.new("UIListLayout", tabScroll)
    uilist.SortOrder = Enum.SortOrder.LayoutOrder
    uilist.Padding = UDim.new(0, 6)

    local uipadding = Instance.new("UIPadding", tabScroll)
    uipadding.PaddingTop = UDim.new(0, 8)
    uipadding.PaddingLeft = UDim.new(0, 5)
    uipadding.PaddingRight = UDim.new(0, 5)

    -- Main Content Container
    local contentContainer = Instance.new("Frame")
    contentContainer.Name = "ContentContainer"
    contentContainer.Parent = frame
    contentContainer.Size = UDim2.new(1, -100, 0.82, 0)
    contentContainer.Position = UDim2.new(0, 95, 0.07, 0)
    contentContainer.BackgroundTransparency = 1

    local tabPages = {}
    local currentTab = nil

    local function switchTab(tabName)
        for name, page in pairs(tabPages) do
            page.Visible = (name == tabName)
        end
        currentTab = tabName
    end

    local function AddSectionTabLabel(parent, text)
        local label = Instance.new("TextLabel")
        label.Size = UDim2.new(1, 0, 0, 24)
        label.BackgroundTransparency = 1
        label.Text = text
        label.Font = Enum.Font.SourceSansBold
        label.TextSize = 16
        label.TextColor3 = Color3.fromRGB(255, 255, 255)
        label.TextXAlignment = Enum.TextXAlignment.Left
        label.Name = "SectionTabLabel"
        label.Parent = parent
    end

    local function AddTabButton(parent, text, iconId, contentFrame)
        local button = Instance.new("TextButton")
        button.Size = UDim2.new(1, 0, 0, 30)
        button.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
        button.Text = ""
        button.AutoButtonColor = false
        button.Parent = parent
        Instance.new("UICorner", button).CornerRadius = UDim.new(0, 5)

        local icon = Instance.new("ImageLabel")
        icon.Size = UDim2.new(0, 18, 0, 18)
        icon.Position = UDim2.new(0, 6, 0.5, -9)
        icon.BackgroundTransparency = 1
        icon.Image = iconId or "rbxassetid://6031071050"
        icon.Parent = button

        local textLabel = Instance.new("TextLabel")
        textLabel.Size = UDim2.new(1, -30, 1, 0)
        textLabel.Position = UDim2.new(0, 26, 0, 0)
        textLabel.BackgroundTransparency = 1
        textLabel.Text = text
        textLabel.Font = Enum.Font.SourceSansBold
        textLabel.TextSize = 14
        textLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
        textLabel.TextXAlignment = Enum.TextXAlignment.Left
        textLabel.Parent = button

        if contentFrame then
            tabPages[text] = contentFrame
            contentFrame.Visible = false

            button.MouseButton1Click:Connect(function()
                switchTab(text)
            end)

            if not currentTab then
                switchTab(text)
            end
        end
    end

    function Clude:CreateSectionTab(parent, titleText, useLeft, useRight)
        local section = Instance.new("Frame")
        section.Size = UDim2.new(1, 0, 0, 120)
        section.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
        section.AutomaticSize = Enum.AutomaticSize.Y
        section.Parent = parent
        section.Name = titleText or "Section"
        Instance.new("UICorner", section).CornerRadius = UDim.new(0, 7)

        local title = Instance.new("TextLabel", section)
        title.Text = titleText or "Section"
        title.Font = Enum.Font.SourceSansBold
        title.TextSize = 16
        title.TextColor3 = Color3.fromRGB(255, 255, 255)
        title.TextXAlignment = Enum.TextXAlignment.Left
        title.BackgroundTransparency = 1
        title.Size = UDim2.new(1, -10, 0, 20)
        title.Position = UDim2.new(0, 8, 0, 4)

        local left, right
        if useLeft then
            left = Instance.new("Frame", section)
            left.Name = "Left"
            left.Size = UDim2.new(useRight and 0.5 or 1, -6, 0, 90)
            left.Position = UDim2.new(0, 6, 0, 30)
            left.BackgroundTransparency = 1
        end

        if useRight then
            right = Instance.new("Frame", section)
            right.Name = "Right"
            right.Size = UDim2.new(useLeft and 0.5 or 1, -6, 0, 90)
            right.Position = UDim2.new(useLeft and 0.5 or 0, 0, 0, 30)
            right.BackgroundTransparency = 1
        end

        return left, right
    end

    return {
        AddSectionTabLabel = AddSectionTabLabel,
        AddTabButton = AddTabButton,
        CreateSectionTab = function(...) return Clude:CreateSectionTab(...) end,
        CreatePage = function(name)
            local page = Instance.new("Frame")
            page.Size = UDim2.new(1, 0, 1, 0)
            page.BackgroundTransparency = 1
            page.Visible = false
            page.Parent = contentContainer
            return page
        end
    }
end

return Clude
