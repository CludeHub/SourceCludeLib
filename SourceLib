local Library = {}
local UIS = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")

-- MAIN UI PART
local screenGui = Instance.new("ScreenGui", game.Players.LocalPlayer:WaitForChild("PlayerGui"))
screenGui.ResetOnSpawn = false

local toggleBtn = Instance.new("TextButton", screenGui)
toggleBtn.Size = UDim2.new(0, 60, 0, 60)
toggleBtn.Position = UDim2.new(0.02, 0, 0.85, 0)
toggleBtn.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
toggleBtn.Text = "+"
toggleBtn.TextColor3 = Color3.new(1, 1, 1)
toggleBtn.TextScaled = true
toggleBtn.ZIndex = 2

-- MAIN WINDOW
local main = Instance.new("Frame", screenGui)
main.Size = UDim2.new(0.8, 0, 0.6, 0)
main.Position = UDim2.new(0.5, 0, 0.5, 0)
main.AnchorPoint = Vector2.new(0.5, 0.5)
main.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
main.Visible = false
main.ZIndex = 1

local uiCorner = Instance.new("UICorner", main)
uiCorner.CornerRadius = UDim.new(0, 10)

local tabsHolder = Instance.new("Frame", main)
tabsHolder.Size = UDim2.new(0, 120, 1, 0)
tabsHolder.Position = UDim2.new(0, 0, 0, 0)
tabsHolder.BackgroundColor3 = Color3.fromRGB(35, 35, 35)

local contentHolder = Instance.new("Frame", main)
contentHolder.Size = UDim2.new(1, -120, 1, 0)
contentHolder.Position = UDim2.new(0, 120, 0, 0)
contentHolder.BackgroundColor3 = Color3.fromRGB(25, 25, 25)

-- TOGGLE WINDOW
local opened = false
toggleBtn.MouseButton1Click:Connect(function()
	opened = not opened
	toggleBtn.Text = opened and "X" or "+"
	main.Visible = true
	local goal = opened and UDim2.new(0.5, 0, 0.5, 0) or UDim2.new(0.5, 0, 1.5, 0)
	local tween = TweenService:Create(main, TweenInfo.new(0.4, Enum.EasingStyle.Sine), {Position = goal})
	tween:Play()
	if not opened then
		wait(0.4)
		main.Visible = false
	end
end)

-- API FUNCTIONS

function Library:CreateTab(tabName)
	local tabBtn = Instance.new("TextButton", tabsHolder)
	tabBtn.Size = UDim2.new(1, 0, 0, 40)
	tabBtn.Text = tabName
	tabBtn.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
	tabBtn.TextColor3 = Color3.new(1, 1, 1)

	local tabPage = Instance.new("ScrollingFrame", contentHolder)
	tabPage.Size = UDim2.new(1, 0, 1, 0)
	tabPage.CanvasSize = UDim2.new(0, 0, 10, 0)
	tabPage.ScrollBarThickness = 6
	tabPage.Visible = false

	tabBtn.MouseButton1Click:Connect(function()
		for _, v in pairs(contentHolder:GetChildren()) do
			if v:IsA("ScrollingFrame") then
				v.Visible = false
			end
		end
		tabPage.Visible = true
	end)

	return {
		CreateButton = function(self, text, callback)
			local btn = Instance.new("TextButton", tabPage)
			btn.Size = UDim2.new(1, -10, 0, 40)
			btn.Position = UDim2.new(0, 5, 0, #tabPage:GetChildren() * 45)
			btn.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
			btn.Text = text
			btn.TextColor3 = Color3.new(1, 1, 1)
			btn.MouseButton1Click:Connect(callback)
		end,

		CreateToggle = function(self, text, callback)
			local toggle = Instance.new("TextButton", tabPage)
			toggle.Size = UDim2.new(1, -10, 0, 40)
			toggle.Position = UDim2.new(0, 5, 0, #tabPage:GetChildren() * 45)
			toggle.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
			toggle.Text = "[OFF] " .. text
			toggle.TextColor3 = Color3.new(1, 1, 1)
			local state = false
			toggle.MouseButton1Click:Connect(function()
				state = not state
				toggle.Text = (state and "[ON] " or "[OFF] ") .. text
				callback(state)
			end)
		end,

		CreateDropdown = function(self, text, options, callback)
			local drop = Instance.new("TextButton", tabPage)
			drop.Size = UDim2.new(1, -10, 0, 40)
			drop.Position = UDim2.new(0, 5, 0, #tabPage:GetChildren() * 45)
			drop.BackgroundColor3 = Color3.fromRGB(80, 80, 80)
			drop.Text = text .. " â–¼"
			drop.TextColor3 = Color3.new(1, 1, 1)

			local opened = false
			drop.MouseButton1Click:Connect(function()
				if opened then return end
				opened = true
				for _, opt in pairs(options) do
					local btn = Instance.new("TextButton", tabPage)
					btn.Size = UDim2.new(1, -30, 0, 30)
					btn.Position = UDim2.new(0, 25, 0, #tabPage:GetChildren() * 35)
					btn.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
					btn.Text = opt
					btn.TextColor3 = Color3.new(1, 1, 1)
					btn.MouseButton1Click:Connect(function()
						callback(opt)
						for _, x in pairs(tabPage:GetChildren()) do
							if x ~= drop and x:IsA("TextButton") then
								x:Destroy()
							end
						end
						opened = false
					end)
				end
			end)
		end,

		CreateLabel = function(self, text)
			local label = Instance.new("TextLabel", tabPage)
			label.Size = UDim2.new(1, -10, 0, 30)
			label.Position = UDim2.new(0, 5, 0, #tabPage:GetChildren() * 35)
			label.BackgroundTransparency = 1
			label.Text = text
			label.TextColor3 = Color3.new(1, 1, 1)
		end,

		CreateParagraph = function(self, text)
			local para = Instance.new("TextLabel", tabPage)
			para.Size = UDim2.new(1, -10, 0, 60)
			para.Position = UDim2.new(0, 5, 0, #tabPage:GetChildren() * 65)
			para.BackgroundTransparency = 1
			para.TextWrapped = true
			para.Text = text
			para.TextColor3 = Color3.new(1, 1, 1)
		end,

		Notify = function(self, msg)
			local notify = Instance.new("TextLabel", screenGui)
			notify.Size = UDim2.new(0.5, 0, 0, 30)
			notify.Position = UDim2.new(0.25, 0, 0.1, 0)
			notify.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
			notify.Text = msg
			notify.TextColor3 = Color3.new(1, 1, 1)
			wait(2)
			notify:Destroy()
		end
	}
end

return Library
